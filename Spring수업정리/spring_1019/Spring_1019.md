# Spring

## 4.1 ì–´í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜



![image-20211019103257878](img/image-20211019103257878.png)



1. **3ê³„ì¸µì€ ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ëŠ” ì—”í„°í”„ë¼ì´ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” êµ¬ì¡°**

2. **ìŠ¤í”„ë§ ì£¼ìš” ëª¨ë“ˆê³¼ ê¸°ìˆ ì„ ë³´ë©´ 3ê³„ì¸µ êµ¬ì¡°ì— ë§ê²Œ ì„¤ê³„**

3. **ë…¼ë¦¬ì  ê°œë…ì´ë¯€ë¡œ ì–¸ì œë“ ì§€ ìƒí™©ê³¼ ì¡°ê±´ì— ë”°ë¼ ë‹¬ë¼ ì§ˆ ìˆ˜ ìˆë‹¤.**



### ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ ì˜ˆì œ

![image-20211019103441058](img/image-20211019103441058.png)







## ì• ìì¼ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ (Agile software development) 

**ì• ìì¼** ë°©ë²•ë¡ ì€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë°©ë²•ì— ìˆì–´ì„œ ì•„ë¬´ëŸ° ê³„íšì´ ì—†ëŠ” ê°œë°œ ë°©ë²•ê³¼ ê³„íšì´ ì§€ë‚˜ì¹˜ê²Œ ë§ì€ ê°œë°œ ë°©ë²•ë“¤ ì‚¬ì´ì—ì„œ íƒ€í˜‘ì ì„ ì°¾ê³ ì í•˜ëŠ” ë°©ë²•ë¡ ì´ë‹¤. 

ë‹¤ë¥¸ ê³ ì „ì ì¸ ë°©ë²•ë¡ , ì˜ˆë¥¼ ë“¤ë©´ í­í¬ìˆ˜ ëª¨ë¸ ë˜ëŠ” ë‚˜ì„  ëª¨í˜•ê³¼ êµ¬ë³„ë˜ëŠ” ê°€ì¥ í° ì°¨ì´ì ì€ less document-oriented, ì¦‰ ë¬¸ì„œë¥¼ í†µí•œ ê°œë°œ ë°©ë²•ì´ ì•„ë‹ˆë¼, code-oriented, ì‹¤ì§ˆì ì¸ ì½”ë”©ì„ í†µí•œ ë°©ë²•ë¡ ì´ë¼ëŠ” ì ì´ë‹¤.



![agile-vs-waterfall](img/agile-vs-waterfall.jpg)



ì• ìì¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¡œ ë¶ˆë¦¬ëŠ” ê°œë°œ ë°©ë²•ë¡ ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ìˆë‹¤.

- **ìµìŠ¤íŠ¸ë¦¼ í”„ë¡œê·¸ë˜ë°(Extreme Programming, XP)** - ì• ìì¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ì˜ ëŒ€í‘œìë¡œ ì• ìì¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ì˜ ë³´ê¸‰ì— í° ì—­í• ì„ í•˜ì˜€ë‹¤. ì´ ë°©ë²•ì€ ê³ ê°ê³¼ í•¨ê»˜ 2ì£¼ ì •ë„ì˜ ë°˜ë³µê°œë°œì„ í•˜ê³ , í…ŒìŠ¤íŠ¸ìš°ì„  ê°œë°œ(TDD)ì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ëª…ì‹œì ì¸ ê¸°ìˆ ê³¼ ë°©ë²•ì„ ê°€ì§€ê³  ìˆë‹¤.

- **ìŠ¤í¬ëŸ¼** - 30ì¼ë§ˆë‹¤ ë™ì‘ ê°€ëŠ¥í•œ ì œí’ˆì„ ì œê³µí•˜ëŠ” ìŠ¤í”„ë¦°íŠ¸(Sprint)ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•˜ê³  ìˆë‹¤. ë§¤ì¼ ì •í•´ì§„ ì‹œê°„ì— ì •í•´ì§„ ì¥ì†Œì—ì„œ ì§§ì€ì‹œê°„ì˜ ê°œë°œì„ í•˜ëŠ” íŒ€ì„ ìœ„í•œ, í”„ë¡œì íŠ¸ ê´€ë¦¬ ì¤‘ì‹¬ì˜ ë°©ë²•ë¡ ì´ë‹¤.

- **í¬ë¦¬ìŠ¤í„¸ íŒ¨ë°€ë¦¬**- ì´ ë°©ì‹ì€ í”„ë¡œì íŠ¸ì˜ ê·œëª¨ì™€ ì˜í–¥ì˜ í¬ê¸°ì— ë”°ë¼ì„œ ì—¬ëŸ¬ì¢…ë¥˜ì˜ ë°©ë²•ë¡ ì„ ì œê³µí•œë‹¤. ê·¸ì¤‘ì—ì„œ ê°€ì¥ ì†Œê·œëª¨ íŒ€ì— ì ìš©í•˜ëŠ” **í¬ë¦¬ìŠ¤í„¸ í´ë¦¬ì–´**ëŠ” ìµìŠ¤íŠ¸ë¦¼ í”„ë¡œê·¸ë˜ë° ë§Œí¼ ì—„ê²©í•˜ì§€ë„ ì•Šê³  íš¨ìœ¨ë„ ë†’ì§€ ì•Šì§€ë§Œ, í”„ë¡œì íŠ¸ì— ì ìš©í•˜ê¸° ì‰¬ìš´ ë°©ë²•ë¡ ì´ë‹¤.

- **Feature-Driven Development** - featureë§ˆë‹¤ 2ì£¼ì •ë„ì˜ ë°˜ë³µ ê°œë°œì„ ì‹¤ì‹œí•œë‹¤. Peter Coadê°€ ì œì°½í•˜ëŠ” ë°©ë²•ë¡ ìœ¼ë¡œì¨, UMLì„ ì´ìš©í•œ ì„¤ê³„ ê¸°ë²•ê³¼ë„ ë°€ì ‘í•œ ê´€ë ¨ì„ ê°€ì§„ë‹¤.

- **ASD(Adaptive Software Development)** - ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì„ í˜¼ë€ ìì²´ë¡œ ê·œì •í•˜ê³ , í˜¼ë€ì„ ëŒ€ì „ì œë¡œ ê·¸ì— ì ì‘í•  ìˆ˜ ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë°©ë²•ì„ ì œì‹œí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ë°©ë²•ë¡ ì´ë‹¤. ë‚´ìš©ì ìœ¼ë¡œëŠ” ë‹¤ë¥¸ ë°©ë²•ë¡ ë“¤ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, í•©ë™ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ(Joint Application Development, ì‚¬ìš©ìë‚˜ ê³ ê°ì´ ì„¤ê³„ì— ì°¸ê°€í•˜ëŠ” ê°œë°œ ë°©ë²•ë¡ )ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒì´ ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤.

- **ìµìŠ¤íŠ¸ë¦¼ ëª¨ë¸ë§** - ìµìŠ¤íŠ¸ë¦¼ ëª¨ë¸ë§ì€ UMLì„ ì´ìš©í•œ ëª¨ë¸ë§ ì¤‘ì‹¬ ë°©ë²•ë¡ ì´ë‹¤. ë‹¤ë§Œ, ì—¬íƒ€ ëª¨ë¸ë§ ë°©ë²•ë“¤ê³¼ëŠ” ë‹¬ë¦¬, ì–¸ì œë‚˜ ì‹¤í–‰í•  ìˆ˜ ìˆê³  ê²€ì¦í•  ìˆ˜ ìˆëŠ” ëª¨ë¸ì„ ì‘ì„±í•˜ëŠ” ê³µì •ì„ ë°˜ë³µí•´ì„œ, ìµœì¢…ì ìœ¼ë¡œëŠ” ëª¨ë¸ë¡œë¶€í„° ìë™ì ìœ¼ë¡œ ì œí’ˆì„ ìƒì„±í•˜ê²Œ í•œë‹¤.

ìƒê¸° ì†Œê°œëœ ì• ìì¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë“¤ì€ ê°ì ë‹¤ë¥¸ íŠ¹ì§•ê³¼ ì ìš© ë²”ìœ„ê°€ ìˆìœ¼ë©°, ì„œë¡œ ì¡°í•©ë„ ê°€ëŠ¥í•˜ë‹¤. ì• ìì¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì±„ìš©í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ì—ì„œëŠ” íŠ¹ì • ë°©ë²•ë¡ ë§Œì„ ì±„íƒí•´ì„œ ë§¤ë‰´ì–¼ëŒ€ë¡œ í‰ë‚´ë§Œ ë‚´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì—¬ëŸ¬ ë°©ë²•ì¤‘ì—ì„œ ìì‹ ì˜ í”„ë¡œì íŠ¸ì— ë§ëŠ” ë¶€ë¶„ì„ ì·¨ì‚¬ ì„ íƒí•˜ì—¬ ì¡°í•©í•˜ê³ , ë˜ ë…ìì ì¸ ë°©ë²•ì„ ë§Œë“¤ì–´ ëƒ„ìœ¼ë¡œì¨ í° íš¨ê³¼ë¥¼ ì˜¬ë¦¬ê³  ìˆë‹¤. ì´ëŸ¬í•œ ì• ìì¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ì˜ ì œì°½ìë“¤ì€ ì• ìì¼ ì—°í•©ì´ë¼ëŠ” ììœ ë¡œìš´ ì¡°ì§ì„ ë§Œë“¤ê³ , ì• ìì¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ì˜ ë³´ê¸‰ì— í˜ì“°ê³  ìˆë‹¤.



**ì˜ˆ) KTì˜ ìŠ¤í¬ëŸ¼ë³´ë“œ**

![KakaoTalk_20211019_113212069](img/KakaoTalk_20211019_113212069.jpg)





### DeFaultServletìœ„ì„

**ìŠ¤í”„ë§ ë™ì‘ ê³¼ì •ì¤‘**

- ì„œë²„ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ web.xmlì— ì§€ì •ëœ servlet-mappingì„ í™•ì¸í•´ì„œ Dispatcher ì‹¤í–‰ 
- Dispatcher Servlet(Controller)ê°€ init( ) í•¨ìˆ˜ í˜¸ì¶œë˜ê²Œ ë˜ëŠ”ë° ì´ë•Œ DefaultServletë¥¼ ì¶”ê°€í•˜ì§€ ì•Šìœ¼ë©´ **ì •ì  ìì›(html, css, js ë“±)ì— ì ‘ê·¼ì‹¤íŒ¨**í•œë‹¤.

==> DispatcherServlet ì´ ëª¨ë“  URLì²˜ë¦¬ì— ì„œë¸”ë¦¿ ë§¤í•‘ì„ í•˜ì˜€ê¸° ë•Œë¬¸ì— í†°ìº£ì€ ì •ì  ìì›ì— ëŒ€í•œ URLì²˜ë¦¬ë„ DispatcherServletì—ê²Œ ë„˜ê¸°ê¸° ë•Œë¬¸ì´ë‹¤.



spring-servlet.xmlì— ì‚½ì…

```
	<!-- validator, conversionService, messageConverterë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡ -->
	<mvc:annotation-driven />
	<!-- ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ(tomcat)ì˜ DefaultServlet ìœ„ì„(Delegate) Handler -->
	<mvc:default-servlet-handler/>
```

ì„ í†µí•´  DefaultServlet ìœ„ì„(Delegate) Handlerë¥¼ ì¶”ê°€ê°€ëŠ¥í•˜ë‹¤.



#### viewResolver ì„¤ì •

ViewResolverëŠ” HandlerMappingì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì£¼ëŠ” ê²ƒ ì²˜ëŸ¼, View ì´ë¦„ì„ ê°€ì§€ê³  View ì˜¤ë¸Œì íŠ¸ë¥¼ ì°¾ì•„ì¤€ë‹¤.



spring-servlet.xmlì— ì‚½ì…

	<!â€“ ViewResolver ì„¤ì • ğŸ¡ª
	<bean id=ï¼‚viewResolverï¼‚ class=ï¼‚org.springframework.web.servlet.view.InternalResourceViewResolverï¼‚>
	    <property name=ï¼‚viewClass" value="org.springframework.web.servlet.view.JstlView" />
	    <property name="prefix" value="/WEB-INF/views/" />
	    <property name="suffix" value=".jsp" />
	    <property name="order" value="1" />
	    // orderí”„ë¡œí¼í‹°ë¥¼ ì§€ì •í•´ ViewResolverì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì •í• ìˆ˜ ìˆë‹¤.
	</bean>

"/WEB-INF/views/main/index.jsp" -> "main/index"

view resolver ì„¤ì •ìœ¼ë¡œ "main/index"ë§Œ ì‘ì„±ê°€ëŠ¥



### Spring ì˜ˆì™¸ì²˜ë¦¬

##### Checked Exception & Runtime Exception

ì˜ˆì™¸ì—ëŠ” ë‘ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤

- Checked Exception

- Runtime Exception

  Runtime Exception ë°‘ì—ëŠ” Unchecked Exceptionì´ ìˆë‹¤



#### Checked Exception

ì§€ì •í•´ì¤€ ì˜ˆì™¸ ì²˜ë¦¬ í´ë˜ìŠ¤ê°€ ìˆëŠ” Exceptionì´ë¯€ë¡œ try catchë¡œ ê°ì‹¸ì¤€ë‹¤



#### RuntimeException

ì²˜ë¦¬í•  ì˜ˆì™¸ í´ë˜ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì— errorì´ë‹¤

try catch ë‚˜ throw Exceptionì„ ê°•ì œí•˜ì§€ ì•ŠëŠ”ë‹¤

ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ë„ë˜ê³  ì•ˆí•´ë„ëœë‹¤

ì²˜ë¦¬ë¥¼ í•  ë•ŒëŠ” í•œê³³ì— ë°›ì•„ì„œ AOPë¥¼ ì´ìš©í•´ ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤

ì´ ê²½ìš°ì—” ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ @ControllerAdvice ë¥¼ ì“°ë©´ëœë‹¤



**1. ì˜ˆì™¸ì „í™˜**

```
public UserVo findByEmailAmdPassword
	(String email, String password) throws UserRepositoryException{
```

```
catch(SQLException e) {
			throw new UserRepositoryException(e.toString());
		}
```

ì˜ˆì™¸ì²˜ë¦¬íšŒí”¼ì²˜ëŸ¼ ê·¸ëŒ€ë¡œ ë„˜ê¸°ì§€ ì•Šê³  ì ì ˆí•œ ì˜ˆì™¸ë¡œ ì „í™˜í•œë‹¤.



**2.ì–´ë“œë°”ì´ì§• ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œì˜ ì˜ˆì™¸ì²˜ë¦¬**

/WEB-INF/views/error/exception.jsp

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h1>Exception Occurs</h1>
	<pre style='color:red'>
		${exception }
	</pre>
</body>
</html>
```

GlobalExceptionHandler.java

```
@ControllerAdvice
public class GlobalExceptionHandler {
	
	@ExceptionHandler(Exception.class)
	public void HandlerException(
		HttpServletRequest request,
		HttpServletResponse response,
		Exception e) throws Exception {
		
		// 1. ë¡œê¹…
		StringWriter errors = new StringWriter();
		e.printStackTrace(new PrintWriter(errors));
		//LOGGER.error(errors.toString());
		
		// 2. ìš”ì²­ êµ¬ë¶„
		
		// 3. ì‚¬ê³¼í˜ì´ì§€(ì •ìƒì¢…ë£Œ)
		request.setAttribute("exception", errors.toString());
		request
			.getRequestDispatcher("/WEB-INF/views/error/exception.jsp")
			.forward(request, response);
	}
```

- @ExceptionHandlerê°™ì€ ê²½ìš°ëŠ” @Controller, @RestControllerê°€ ì ìš©ëœ Beanë‚´ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ í•˜ë‚˜ì˜ ë©”ì„œë“œì—ì„œ ì²˜ë¦¬í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ í•œë‹¤.

- @ControllerAdvice: @ExceptionHandlerê°€ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ëŒ€í•œ ê²ƒì´ë¼ë©´, @ControllerAdviceëŠ” ëª¨ë“  @Controller ì¦‰, ì „ì—­ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ë¥¼ ì¡ì•„ ì²˜ë¦¬í•´ì£¼ëŠ” annotationì´ë‹¤.

  

**3.ì• í”Œë¦¬ì¼€ì´ì…˜ ë°–ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ì•ˆë‚´ í˜ì´ì§€**

/WEB-INF/views/error/404.jsp

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
 <h1>Not Found(404) --Ooooooooops</h1>
 <p>
 	ì£„ì†¡í•©ë‹ˆë‹¤. ìš”ì„±í•œ í˜ì´ì§€ ì°¾ì„ìˆ˜ì—†ìŠµë‹ˆë‹¤.
 </p>
</body>
</html>
```

web.xmlì— ë‹¤ìŒë‚´ìš©ì„ ì„¤ì •

```
<!-- ê³µí†µ ì—ëŸ¬ í˜ì´ì§€ -->

<error-page>

<error-code>404</error-code>

<location>/WEB-INF/views/error/404.jsp</location>

</error-page>

<error-page>

<error-code>500</error-code>

<location>/WEB-INF/views/error/500.jsp</location>

</error-page>
```

- <error-code></error-code> ì•ˆì— ëª…ì‹œëœ 404ì—ëŸ¬ ë°œìƒì‹œ ì„¤ì •í•´ë‘” URLë¥¼ í†µí•´ ì„¤ì •í•´ë‘” jspì‹¤í–‰

